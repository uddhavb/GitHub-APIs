/*
OUTPUT:

D:\REST-SELENIUM\REST>node createRepo.js
{ id: 40831,
  name: 'Trial',
  full_name: 'ubhosle/Trial',
  owner:
   { login: 'ubhosle',
     id: 7802,
     avatar_url: 'https://avatars.github.ncsu.edu/u/7802?',
     gravatar_id: '',
     url: 'https://github.ncsu.edu/api/v3/users/ubhosle',
     html_url: 'https://github.ncsu.edu/ubhosle',
     followers_url: 'https://github.ncsu.edu/api/v3/users/ubhosle/followers',
     following_url: 'https://github.ncsu.edu/api/v3/users/ubhosle/following{/other_user}',
     gists_url: 'https://github.ncsu.edu/api/v3/users/ubhosle/gists{/gist_id}',
     starred_url: 'https://github.ncsu.edu/api/v3/users/ubhosle/starred{/owner}{/repo}',
     subscriptions_url: 'https://github.ncsu.edu/api/v3/users/ubhosle/subscriptions',
     organizations_url: 'https://github.ncsu.edu/api/v3/users/ubhosle/orgs',
     repos_url: 'https://github.ncsu.edu/api/v3/users/ubhosle/repos',
     events_url: 'https://github.ncsu.edu/api/v3/users/ubhosle/events{/privacy}',
     received_events_url: 'https://github.ncsu.edu/api/v3/users/ubhosle/received_events',
     type: 'User',
     site_admin: false,
     ldap_dn: 'CN=ubhosle,OU=People,DC=wolftech,DC=ad,DC=ncsu,DC=edu' },
  private: false,
  html_url: 'https://github.ncsu.edu/ubhosle/Trial',
  description: 'This is my first repository',
  fork: false,
  url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial',
  forks_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/forks',
  keys_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/keys{/key_id}',
  collaborators_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/collaborators{/collaborator}',
  teams_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/teams',
  hooks_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/hooks',
  issue_events_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/issues/events{/number}',
  events_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/events',
  assignees_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/assignees{/user}',
  branches_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/branches{/branch}',
  tags_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/tags',
  blobs_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/git/blobs{/sha}',
  git_tags_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/git/tags{/sha}',
  git_refs_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/git/refs{/sha}',
  trees_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/git/trees{/sha}',
  statuses_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/statuses/{sha}',
  languages_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/languages',
  stargazers_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/stargazers',
  contributors_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/contributors',
  subscribers_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/subscribers',
  subscription_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/subscription',
  commits_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/commits{/sha}',
  git_commits_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/git/commits{/sha}',
  comments_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/comments{/number}',
  issue_comment_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/issues/comments{/number}',
  contents_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/contents/{+path}',
  compare_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/compare/{base}...{head}',
  merges_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/merges',
  archive_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/{archive_format}{/ref}',
  downloads_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/downloads',
  issues_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/issues{/number}',
  pulls_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/pulls{/number}',
  milestones_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/milestones{/number}',
  notifications_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/notifications{?since,all,participating}',
  labels_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/labels{/name}',
  releases_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/releases{/id}',
  deployments_url: 'https://github.ncsu.edu/api/v3/repos/ubhosle/Trial/deployments',
  created_at: '2017-09-04T16:45:38Z',
  updated_at: '2017-09-04T16:45:38Z',
  pushed_at: '2017-09-04T16:45:39Z',
  git_url: 'git://github.ncsu.edu/ubhosle/Trial.git',
  ssh_url: 'git@github.ncsu.edu:ubhosle/Trial.git',
  clone_url: 'https://github.ncsu.edu/ubhosle/Trial.git',
  svn_url: 'https://github.ncsu.edu/ubhosle/Trial',
  homepage: 'https://www.google.com/',
  size: 0,
  stargazers_count: 0,
  watchers_count: 0,
  language: null,
  has_issues: true,
  has_projects: true,
  has_downloads: true,
  has_wiki: true,
  has_pages: false,
  forks_count: 0,
  mirror_url: null,
  open_issues_count: 0,
  forks: 0,
  open_issues: 0,
  watchers: 0,
  default_branch: 'master',
  permissions: { admin: true, push: true, pull: true },
  allow_squash_merge: true,
  allow_merge_commit: true,
  allow_rebase_merge: true,
  network_count: 0,
  subscribers_count: 0 }
*/

var request = require('request');
var fs = require("fs");
var Promise = require('bluebird');
var parse = require('parse-link-header');

var token = "token " + "30eff25b289a2607cb7f385ca74ae8f2bf803cb3";
var userId = "ubhosle";

var urlRoot = "https://github.ncsu.edu/api/v3";

var newRepo = "Trial";
createRepo(userId);

function createRepo(owner) {
    var options = {
        url: urlRoot +'/user/repos',
        method: 'POST',
        headers: {
            "User-Agent": "EnableIssues",
            "content-type": "application/json",
            "Authorization": token
        },
        json: {
            "name": newRepo,
            "description": "This is my first repository",
            "homepage": "https://www.google.com/",
            "private": false,
            "has_issues": true,
            "has_projects": true,
            "has_wiki": true,
        }
    };
    // Send a http request to url and specify a callback that will be called upon its return.
    request(options, function (error, response, body) {
        //var obj = JSON.parse(body);
        console.log(body);
        for (var i = 0; i < body.length; i++) {
            var name = body[i].name;
            console.log(name);
        }
    });
}




function getYourRepos(userName)
{

	var options = {
		url: urlRoot + '/users/' + userName + "/repos",
		method: 'GET',
		headers: {
			"User-Agent": "EnableIssues",
			"content-type": "application/json",
			"Authorization": token
		}
	};

	// Send a http request to url and specify a callback that will be called upon its return.
	request(options, function (error, response, body) 
	{
		var obj = JSON.parse(body);
		console.log( obj );
		for( var i = 0; i < obj.length; i++ )
		{
			var name = obj[i].name;
			console.log( name );
		}
	});

}

function listBranches(owner,repo)
{
    var options = {
        url: urlRoot+'/repos/'+ userId + '/' + repo + "/branches",
        method: 'GET',
        headers: {
            //"User-Agent": "EnableIssues",
            //"content-type": "application/json",
            "Authorization": token
        }
    };
    // Send a http request to url and specify a callback that will be called upon its return.
    request(options, function (error, response, body) {
        var obj = JSON.parse(body);
        console.log(obj);
        for (var i = 0; i < obj.length; i++) {
            var name = obj[i].name;
            console.log(name);
        }
    });
    
}

